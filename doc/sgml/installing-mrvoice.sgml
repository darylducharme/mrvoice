<!--
  CVS ID: $Id: installing-mrvoice.sgml,v 1.15 2002/04/23 21:15:54 minter Exp $
-->

<chapter><title>Installing Mr. Voice</title>

  <sect1><title>Required Components</title>
    <para>
      The following software components are required to run Mr. Voice:
    </para>
    <itemizedlist>
      <listitem><para>
          A Unix-like operating system (Linux/*BSD/etc.) or a Microsoft operating system Windows 95 or higher.
        </para>
      </listitem>
      <listitem>
        <para><ulink url="http://www.perl.com/">Perl</ulink> version 5 (Unix version should be provided with most modern Unix systems, or get the Windows version from <ulink url="http://aspn.activestate.com/ASPN/Downloads/ActivePerl/">ActiveState</ulink>), plus the following perl modules (available from <ulink url="http://www.cpan.org/">CPAN</ulink> or for Windows via ActivePerl's PPM):
          <itemizedlist>
            <listitem>
              <para><ulink url="http://www.cpan.org/modules/by-module/DBI/">DBI</ulink></para>
            </listitem>
            <listitem>
              <para><ulink url="http://www.cpan.org/modules/by-module/DBD/">DBD </ulink> driver for your database (Msql-Mysql-modules if you're using MySQL on Unix, DBD-Mysql if you're using MySQL on Windows)</para>
            </listitem>
            <listitem>
              <para><ulink url="http://www.cpan.org/modules/by-module/Tk/">Tk</ulink></para>
            </listitem>
            <listitem>
              <para><ulink url="http://www.cpan.org/modules/by-module/MPEG/">MPEG::MP3-Info</ulink></para>
            </listitem>
          </itemizedlist>
        </para>
	<para>If you are planning to install Mr. Voice onto a Windows computer without internet access, you will need to grab the PPM bundle I've built from <ulink url="http://www.lunenburg.org/mrvoice/ppm.zip">http://www.lunenburg.org/mrvoice/ppm.zip</ulink>.  Details on how to use it will be covered later.</para>
      </listitem>
      <listitem>
        <para>A relational database that is supported by a perl DBI module.  <ulink url="http://www.mysql.com/">MySQL</ulink> has been tested and is recommended.</para>
      </listitem>
      <listitem>
        <para>An MP3 player.  <ulink url="http://www.xmms.org/">xmms</ulink> and <ulink url="http://www.winamp.com/">WinAmp</ulink> are recommended.</para>
      </listitem>  
    </itemizedlist>
    <important><para>Further verification is needed, but it appears that Windows users need to have networking set up for MySQL to work.  So if you don't have a modem or a network card in your computer, you may need to add one (you can find cheap network cards for $10-$15).</para></important>
  </sect1>

  <sect1><title>Installation Steps</title>
    <para>This will help you get Mr. Voice up and running on either a Unix or Windows system.</para>

    <sect2><title>Unix Installation Instructions</title>
      <itemizedlist>
        <listitem>
          <para>Unpack the <filename>mrvoice-x.x.tar.gz</filename> archive.  It will create a <filename>mrvoice-x.x</filename> directory.  The <filename>mrvoice.pl</filename> file is the only one needed to run the program (meaning that you can move <filename>mrvoice.pl</filename> to another location after you're done configuring it), but there are other files in the archive, such as the <filename>dbinit.sql</filename> database initilization script, documentation, licenses, etc.</para>
	</listitem>
        <listitem>
          <para>Compile and/or install any required software from above (perl modules, etc.).  I will skip the software setup, assuming that if you're trying to run this on a Unix system, you're geeky enough to install the required stuff by yourself.  ;-)  If you run into issues, feel free to email me or check the software's website. </para>
        <para>Set up your database properly (set up a superuser account, etc.) and start it.  Some further tips are available in the Windows installation section.</para>
        </listitem>
        <listitem>
          <para>Set up a database for the program to use.  It needs two tables in a database, so you can either use an existing database or create one expressly for Mr. Voice.  The database name is completely up to you - just remember what it is.</para>
          <para>To set up a database in MySQL, you would do something like the following:
            <screen>
[you@yourhost you]$ mysql -u root -p mysql
Enter password: [YOUR SUPERUSER PASSWORD]
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 9799 to server version: 3.23.32

Type 'help;' or '\h' for help. Type '\c' to clear the buffer

mysql> create database mrvoice;
Query OK, 1 row affected (0.02 sec)

mysql> 
            </screen>
          </para>
        </listitem>
        <listitem>
          <para>Run the following MySQL command from the <filename>mrvoice-x.x</filename> directory, where <replaceable>DATABASE_USER</replaceable> is the name of a user with administrative access over the database named <replaceable>DATABASE_NAME</replaceable>:</para>
          <para><userinput>mysql -u <replaceable>DATABASE_USER</replaceable> -p <replaceable>DATABASE_NAME</replaceable> < dbinit.sql</userinput></para>
          <para>For other databases (Postgres, etc.), adjust to taste.  <filename>dbinit.sql</filename> contains SQL commands that create two tables in <replaceable>DATABASE_NAME</replaceable>: mrvoice and categories.</para>
        </listitem>
      </itemizedlist>
      <para>At this point, all of the software should be set up and ready for configuration!</para>
    </sect2>

    <sect2><title>Windows Installation Instructions</title>
      <para>First, download WinAmp, ActivePerl, and MySQL from their respective websites.  Install WinAmp and ActivePerl the normal way, by double-clicking the installer icons and using the defaults provided.</para>
      <sect3><title>Installing and Setting Up MySQL</title>
        <itemizedlist>
          <listitem>
            <para>Unzip the MySQL .zip file that you downloaded to a temporary place (such as C:\mysql-temp).  Go to that directory and run the <filename>setup.exe</filename> file.  It will install into <filename>C:\mysql</filename> by default - accept that unless you have a reason to put it somewhere else.  Choose the "Typical" installation.</para>
          </listitem>
          <listitem>
            <para>Set up Windows to run the file <filename>C:\mysql\bin\mysqld.exe</filename> upon startup.  Under Windows 98, you can do this by going under Start->Settings->Taskbar & Start Menu, choosing "Advanced" under "Customize Start Menu", and placing a shortcut to the <filename>mysqld.exe</filename> file under the "StartUp" section.  There may be a better way - feel free to email me and let me know what it is.  Double-click the <filename>mysqld.exe</filename> file to start up the MySQL daemon.</para>
          </listitem>   
          <listitem>
            <para>While you're messing with MySQL, it's a good time to set up your superuser password and create the database that you're going to use for Mr. Voice.  To do this, go to <filename>C:\mysql\bin\</filename> and run <filename>mysql.exe</filename>.  It will open a DOS window with a <prompt>MySQL></prompt> prompt.  At this prompt, enter <userinput>use mysql;</userinput>.</para>
          </listitem>
          <listitem>
            <para>If that succeeds, run <userinput>update user set Password=password('<replaceable>YOUR_PASSWORD</replaceable>') where User='root';</userinput>.  This will set your superuser up to be username "root" with password <replaceable>YOUR_PASSWORD</replaceable>.  Run the command <userinput>flush privileges;</userinput> to have the changes take effect. <emphasis>Remember this password</emphasis> - if you lose it, you won't be able to administer your database in the future!</para>
          </listitem>
          <listitem>
            <para>Run <userinput>create database <replaceable>DATABASE_NAME</replaceable>;</userinput>, where <replaceable>DATABASE_NAME</replaceable> is the name of the database that you want to house the Mr. Voice tables.  The one I use is called "comedysportz", you can pick anything.  Bear in mind that the database name can't contain spaces or other weird characters - make it alphanumeric.</para>
	    <para>Finally, set up a normal user to access this database.  Run <userinput>grant all on <replaceable>DATABASE_NAME</replaceable>.* to <replaceable>USERNAME</replaceable>@localhost identified by '<replaceable>PASSWORD</replaceable>';</userinput>  Replacing <replaceable>USERNAME</replaceable> and <replaceable>PASSWORD</replaceable> with ones of your choosing.  Remember this username and password, they're the ones you will use when you configure Mr. Voice later.  For the purposes of this documentation, we will assume that you chose the username of "mrvoice" and password of "password" - your choices may vary.</para>
          </listitem>
          <listitem>
            <para>After you've done all of these steps, enter <userinput>\q</userinput> at the <prompt>MySQL></prompt> prompt.  For more information on MySQL, read the documentation included in the .ZIP file, or visit the MySQL website.</para>
          </listitem>
        </itemizedlist>
      </sect3>
      <sect3><title>Installing the Perl Modules</title>
      <para>The next step is to install the needed Perl modules.  Thanks to the great PPM system that ActiveState provides for their ActivePerl distribution, this is a snap. To start PPM, open a Command Prompt/DOS Window.  Type <userinput>ppm</userinput> and hit enter.  You should see "PPM Interactive Shell" and a <prompt>PPM></prompt> prompt. From that prompt, we'll install the modules. <note><para>If you are not connected to the internet, skip to the section entitled "Manually Installing the Perl Modules"</para></note></para>
        <itemizedlist>
          <listitem>
            <para>Enter <userinput>search DBI</userinput>.  You should see a list of packages returned.  At the <prompt>PPM></prompt> prompt, enter <userinput>install DBI</userinput> to install the DBI module.</para>
          </listitem>
          <listitem>
            <para>Enter <userinput>search mysql</userinput>.  At the <prompt>PPM></prompt> prompt, enter <userinput>install mysql</userinput> to install the MySQL module.</para>
          </listitem>
          <listitem>
            <para>Enter <userinput>search Tk</userinput>.  At the <prompt>PPM></prompt> prompt, enter <userinput>install Tk</userinput> to install the Tk module.</para>
          </listitem>
          <listitem>
            <para>Enter <userinput>search MP3</userinput>.  At the <prompt>PPM></prompt> prompt, enter <userinput>install MP3-Info</userinput> to install the MPEG::MP3-Info module.</para>
          </listitem>
          <listitem>
            <para>You're now done with the Perl install!  Enter <userinput>quit</userinput> at the <prompt>PPM></prompt> prompt to exit back to the DOS shell.  Close the DOS shell.</para>
          </listitem>
        </itemizedlist>
	  <sect4><title>Manually Installing the Perl Modules</title>
	    <para>If the Windows computer that you are installing on does not have internet access, you will not be able to download the proper Perl modules on-the-fly.  If this is the case, you will need to get the modules manually. I have created a zip file that will hopefully make this easy.</para>
	    <para>
	      <itemizedlist>
	        <listitem>
		  <para>Get the file <filename>ppm.zip</filename> from <ulink url="http://www.lunenburg.org/mrvoice/ppm.zip">http://www.lunenburg.org/mrvoice/ppm.zip</ulink>, and copy it to the computer that will run Mr. Voice.</para>
		</listitem>
		<listitem>
		  <para>Unzip <filename>ppm.zip</filename> into the directory <filename>C:\</filename>.  This will create the directory <filename>C:\PPM\</filename>, containing eight files.</para>
		</listitem>
		<listitem>
		  <para>Go to a DOS/Command prompt, type <userinput>ppm</userinput> and hit enter.  You should see "PPM Interactive Shell" and a <prompt>PPM></prompt> prompt.</para>
		</listitem>
		<listitem>
		  <para>From that prompt, run <userinput>search --location=C:\PPM</userinput>.  That should return a list of four packages (DBI, DBD-Mysql, Tk, and MP3-Info).</para>
		</listitem>
		<listitem>
		  <para>Next, you have to tell PPM that your new directory is a valid repository, so run <userinput>set repository local C:\PPM</userinput> to enable the local directory.</para>
		</listitem>
		<listitem>
		  <para>From the <prompt>PPM></prompt> prompt, run <userinput>install DBI DBD-Mysql Tk MP3-Info</userinput>.  Answer "y" to the confirmations.</para>
		</listitem>
		<listitem>
		  <para>From the <prompt>PPM></prompt> prompt, run <userinput>query</userinput> to make sure those four packages show up as being installed.</para>
		</listitem>
		<listitem>
		  <para>If they do, then enter <userinput>quit</userinput> to exit from PPM, and then close the DOS window.  You're done!</para>
		</listitem>
              </itemizedlist>
	    </para>
	  </sect4>
      </sect3>
      <sect3><title>Installing the Mr. Voice Software</title>
        <para>Now we will install the Mr. Voice software itself, and set up its environment.</para>
        <itemizedlist>
          <listitem>
            <para>Unzip the <filename>mrvoice-current.zip</filename> file to your desired location.  It will create a directory named <filename>mrvoice-x.x</filename> under the location that you choose.  These instructions will assume that you unzip it to <filename>C:\</filename>, creating the <filename>C:\mrvoice-x.x\</filename> directory, where x.x is the version number.</para>
           </listitem>
           <listitem>
             <para>Open a DOS prompt window, and cd to <filename>C:\mrvoice-x.x\</filename>.  Run the command: <userinput>C:\mysql\bin\mysql -u root -p <replaceable>DATABASE_NAME</replaceable> < dbinit.sql</userinput> where <replaceable>DATABASE_NAME</replaceable> is the name you set up above.  It will prompt you for a password.  Enter the password you set up above.  If it runs the command without errors, then your database is initialized.</para>
           </listitem>
           <listitem>
             <para>You will need a directory to store your MP3 files, and a directory to store your hotkey save files.  I suggest <filename>C:\MP3\</filename> for the MP3 directory and <filename>C:\mrvoice-hotkeys\</filename> for the save files, but you can pick anything.  Go ahead and create the directories now.
             </para>
           </listitem>
         </itemizedlist>
      </sect3>
    </sect2>
  </sect1>
</chapter>
