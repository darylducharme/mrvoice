<!--
  CVS ID: $Id: installing-mrvoice.sgml,v 1.18 2002/08/14 18:00:10 minter Exp $
-->

<chapter><title>Installing Mr. Voice</title>

  <sect1><title>Required Components</title>
    <para>
      Mr. Voice currently runs under Unix-like operating systems (Linux/*BSD/etc) and Microsoft operating systems (Windows 95 or higher).
    </para>
    <sect2><title>Microsoft Windows</title>
      <para>The following components are required to run Mr. Voice under Windows 95 or higher.
      <itemizedlist>
        <listitem><para>The <ulink url= "http://www.mysql.com/">MySQL</ulink> database engine.</para></listitem>
        <listitem> <para>An MP3 player.  <ulink url="http://www.winamp.com/">WinAmp</ulink> is recommended.</para></listitem>
        <listitem><para>The <ulink url="http://www.csc.uvic.ca/~karvanit/">httpQ plugin</ulink> for WinAmp.  <emphasis>Optional, but recommended</emphasis></para></listitem>
      </itemizedlist>
      <important><para>Windows users need to have at least minimal TCP/IP networking set up for MySQL to work.</para></important>
      </para>
    </sect2>
    
    <sect2><title>Unix/Linux/BSD</title>
    <para>
      <itemizedlist>
        <listitem>
          <para><ulink url="http://www.perl.com/">Perl</ulink> version 5 (Should be provided with most modern Unix systems), plus the following perl modules (most available from <ulink url="http://www.cpan.org/">CPAN</ulink>):
            <itemizedlist>
              <listitem>
                <para><ulink url="http://www.cpan.org/modules/by-module/DBI/">DBI</ulink></para>
              </listitem>
              <listitem>
                <para><ulink url="http://www.cpan.org/modules/by-module/DBD/">DBD </ulink> driver for your database (Msql-Mysql-modules if you're using MySQL)</para>
              </listitem>
              <listitem>
                <para><ulink url="http://www.cpan.org/modules/by-module/Tk/">Tk</ulink></para>
              </listitem>
              <listitem>
                <para><ulink url="http://www.cpan.org/modules/by-module/MPEG/">MPEG::MP3-Info</ulink></para>
              </listitem>
              <listitem>
                <para><ulink url="http://www.cpan.org/modules/by-module/Audio/">Audio::Wav</ulink></para>
              </listitem>
              <listitem>
                <para><ulink url="http://synthcode.com/code/vorbis/">Ogg::Vorbis</ulink></para>
              </listitem>
              <listitem>
                <para><ulink url="http://www.cpan.org/modules/by-module/Date/">Date::Manip</ulink></para>
              </listitem>
            </itemizedlist>
          </para>
        </listitem>
        <listitem>
          <para>A relational database that is supported by a perl DBI module.  <ulink url="http://www.mysql.com/">MySQL</ulink> has been tested and is recommended.</para>
        </listitem>
        <listitem>
          <para>An MP3 player.  <ulink url="http://www.xmms.org/">xmms</ulink> is recommended.</para>
        </listitem>  
      </itemizedlist>
    </para>
    </sect2>
  </sect1>

  <sect1><title>Installation Steps</title>
    <para>This will help you get Mr. Voice up and running on either a Unix or Windows system.</para>

    <sect2><title>Unix Installation Instructions</title>
      <itemizedlist>
        <listitem>
          <para>Unpack the <filename>mrvoice-x.x.tar.gz</filename> archive.  It will create a <filename>mrvoice-x.x</filename> directory.  The <filename>mrvoice.pl</filename> file is the only one needed to run the program (meaning that you can move <filename>mrvoice.pl</filename> to another location after you're done configuring it), but there are other files in the archive, such as the <filename>dbinit.sql</filename> database initilization script, documentation, licenses, etc.</para>
	</listitem>
        <listitem>
          <para>Compile and/or install any required software from above (perl modules, etc.).  I will skip the software setup, assuming that if you're trying to run this on a Unix system, you're geeky enough to install the required stuff by yourself.  ;-)  If you run into issues, feel free to email me or check the software's website. </para>
        <para>Set up your database properly (set up a superuser account, etc.) and start it.  Some further tips are available in the Windows installation section.</para>
        </listitem>
        <listitem>
          <para>Set up a database for the program to use.  It needs two tables in a database, so you can either use an existing database or create one expressly for Mr. Voice.  The database name is completely up to you - just remember what it is.</para>
          <para>To set up a database in MySQL, you would do something like the following:
            <screen>
[you@yourhost you]$ mysql -u root -p mysql
Enter password: [YOUR SUPERUSER PASSWORD]
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 9799 to server version: 3.23.32

Type 'help;' or '\h' for help. Type '\c' to clear the buffer

mysql> create database mrvoice;
Query OK, 1 row affected (0.02 sec)

mysql> 
            </screen>
          </para>
        </listitem>
        <listitem>
          <para>Run the following MySQL command from the <filename>mrvoice-x.x</filename> directory, where <replaceable>DATABASE_USER</replaceable> is the name of a user with administrative access over the database named <replaceable>DATABASE_NAME</replaceable>:</para>
          <para><userinput>mysql -u <replaceable>DATABASE_USER</replaceable> -p <replaceable>DATABASE_NAME</replaceable> < dbinit.sql</userinput></para>
          <para>For other databases (Postgres, etc.), adjust to taste.  <filename>dbinit.sql</filename> contains SQL commands that create two tables in <replaceable>DATABASE_NAME</replaceable>: mrvoice and categories.</para>
        </listitem>
      </itemizedlist>
      <para>At this point, all of the software should be set up and ready for configuration!</para>
    </sect2>

    <sect2><title>Windows Installation Instructions</title>
      <para>First, download WinAmp and MySQL from their respective websites.  Install WinAmp the normal way, by double-clicking the installer icons and using the defaults provided.</para>
      <para>If you're using the httpQ plugin for WinAmp, download its zip file and install it.  Then, do the following steps:
        <itemizedlist>
          <listitem><para>Start WinAmp by itself, right-click on the "OAIDV" bar on the left of the window, choose Options->Preferences.</para></listitem>
          <listitem><para>Go down to plugins->General Purpose.  You should see the httpQ plugin listed.  Highlight that, and hit "configure".</para></listitem>
          <listitem><para>Under the General tab, put in a password (your choosing), leave the port at 4800, and check the box to start the service automatically.  Hit the Apply button, then the x at the top-right.  Close the preferences, and exit from WinAmp.  <emphasis>Remember the password you just set up - you will need it later.</emphasis></para></listitem>
        </itemizedlist>
      </para>
      <sect3><title>Installing and Setting Up MySQL</title>
        <itemizedlist>
          <listitem>
            <para>Unzip the MySQL .zip file that you downloaded to a temporary place (such as C:\mysql-temp).  Go to that directory and run the <filename>setup.exe</filename> file.  It will install into <filename>C:\mysql</filename> by default - accept that unless you have a reason to put it somewhere else.  Choose the "Typical" installation.</para>
          </listitem>
          <listitem>
            <para>Set up Windows to run the file <filename>C:\mysql\bin\mysqld.exe</filename> upon startup.  Under Windows 98, you can do this by going under Start->Settings->Taskbar & Start Menu, choosing "Advanced" under "Customize Start Menu", and placing a shortcut to the <filename>mysqld.exe</filename> file under the "StartUp" section.  There may be a better way - feel free to email me and let me know what it is.  Double-click the <filename>mysqld.exe</filename> file to start up the MySQL daemon.</para>
          </listitem>   
          <listitem>
            <para>While you're messing with MySQL, it's a good time to set up your superuser password and create the database that you're going to use for Mr. Voice.  To do this, go to <filename>C:\mysql\bin\</filename> and run <filename>mysql.exe</filename>.  It will open a DOS window with a <prompt>MySQL></prompt> prompt.  At this prompt, enter <userinput>use mysql;</userinput>.</para>
          </listitem>
          <listitem>
            <para>If that succeeds, run <userinput>update user set Password=password('<replaceable>YOUR_PASSWORD</replaceable>') where User='root';</userinput>.  This will set your superuser up to be username "root" with password <replaceable>YOUR_PASSWORD</replaceable>.  Run the command <userinput>flush privileges;</userinput> to have the changes take effect. <emphasis>Remember this password</emphasis> - if you lose it, you won't be able to administer your database in the future!</para>
          </listitem>
          <listitem>
            <para>Run <userinput>create database <replaceable>DATABASE_NAME</replaceable>;</userinput>, where <replaceable>DATABASE_NAME</replaceable> is the name of the database that you want to house the Mr. Voice tables.  The one I use is called "comedysportz", you can pick anything.  Bear in mind that the database name can't contain spaces or other weird characters - make it alphanumeric.</para>
	    <para>Finally, set up a normal user to access this database.  Run <userinput>grant all on <replaceable>DATABASE_NAME</replaceable>.* to <replaceable>USERNAME</replaceable>@localhost identified by '<replaceable>PASSWORD</replaceable>';</userinput>  Replacing <replaceable>USERNAME</replaceable> and <replaceable>PASSWORD</replaceable> with ones of your choosing.  Remember this username and password, they're the ones you will use when you configure Mr. Voice later.  For the purposes of this documentation, we will assume that you chose the username of "mrvoice" and password of "password" - your choices may vary.</para>
          </listitem>
          <listitem>
            <para>After you've done all of these steps, enter <userinput>\q</userinput> at the <prompt>MySQL></prompt> prompt.  For more information on MySQL, read the documentation included in the .ZIP file, or visit the MySQL website.</para>
          </listitem>
        </itemizedlist>
      </sect3>
      <sect3><title>Installing the Mr. Voice software on Windows</title>
        <para>New in Version 1.5 is an all-in-one version of Mr. Voice that does <emphasis>not</emphasis> require you to install ActivePerl or any of the perl modules that are discussed in this section.  This is now the supported way to run Mr. Voice on Windows - it's significantly less complicated than using ActivePerl, PPM modules, and so forth.</para>
        <para>Unzip the <filename>mrvoice-current.zip</filename> file to your desired location.  It will create a directory named <filename>mrvoice-x.x</filename> under the location that you choose.  These instructions will assume that you unzip it to <filename>C:\</filename>, creating the <filename>C:\mrvoice-x.x\</filename> directory, where x.x is the version number.</para>
        <para>Open a DOS prompt window, and cd to <filename>C:\mrvoice-x.x\</filename>.  Run the command: <userinput>C:\mysql\bin\mysql -u root -p <replaceable>DATABASE_NAME</replaceable> < dbinit.sql</userinput> where <replaceable>DATABASE_NAME</replaceable> is the name you set up above.  It will prompt you for a password.  Enter the password you set up above.  If it runs the command without errors, then your database is initialized.</para>
        <para>You will need a directory to store your MP3 files, and a directory to store your hotkey save files.  I suggest <filename>C:\MP3\</filename> for the MP3 directory and <filename>C:\mrvoice-hotkeys\</filename> for the save files, but you can pick anything.  Go ahead and create the directories now.</para>
       <para>Finally, to actually run the software, double-click on the file <filename>mrvoice.exe</filename>.  The program should start up!  </para>
      </sect3>
    </sect2>
  </sect1>
</chapter>
